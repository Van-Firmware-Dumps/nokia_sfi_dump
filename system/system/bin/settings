#!/system/bin/sh
cmd settings "$@"

# Added by qinjinke@sagereal.com for MGK-852 charger test percentage Begin 2022-03-31 
#收到之后往sys/class/power_supply_battery/charger.0/hmd_battery_max_charge_percentage 写值
if [ "${1}" == "put" ] && [ "${2}" == "secure" ] && [ "${3}" == "hmd_battery_max_charge_percentage" ] && [ "${4}" != "" ]
then  
expr ${4} + 1 &>/dev/null
if [ $? -eq 0 ]
then
echo ${4} > /sys/class/power_supply/battery/charger.0/hmd_battery_max_charge_percentage 
else
# Added by sunyiyuan@hoperun.com for SFI-673 TEST3:
# When input invalid value , Setting should be ignored and normal battery charging behaviour (battery value of 100) should occur
echo 100 > /sys/class/power_supply/battery/charger.0/hmd_battery_max_charge_percentage
echo "write failed,please input a integer!"
fi
 fi
# Added by qinjinke@sagereal.com for MGK-852 charger test percentage Begin 2022-03-31 

